<html>
<head></head>
<body>
  <form>
    <input type='file' accept='image/*' multiple='multiple' name='imgs[]'>
    <button type='submit'>送信</button>
  </form>

  <script src='https://www.gstatic.com/firebasejs/7.5.0/firebase-app.js'></script>
  <script src='https://www.gstatic.com/firebasejs/7.5.0/firebase-storage.js'></script>
  <script>

    //firebase初期化
    var firebaseConfig = {
      apiKey: 'xxxxx',
      projectId: 'yyyyy',
      storageBucket: 'zzzzzz',
    }
    firebase.initializeApp(firebaseConfig);

    //formのsubmitにイベント設定
    var form = document.querySelector('form');
    form.addEventListener('submit', function (e) {
      e.preventDefault();
      var imgs = form.querySelector('input');
      var uploads = [];
      for (var file of imgs.files) {
          //選択したファイルのファイル名を使うが、場合によってはかぶるので注意
        var storageRef = firebase.storage().ref('form-uploaded/' + file.name);
        uploads.push(storageRef.put(file));
      }
      //すべての画像のアップロード完了を待つ
      Promise.all(uploads).then(function () {
        console.log('アップロード完了');
      });
    });
  </script>

</body>
</html>
